<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸° (ì œì™¸ ë²ˆí˜¸ ì„ íƒ)</title>
  <meta name="description" content="ì›í•˜ì§€ ì•ŠëŠ” ë²ˆí˜¸ë¥¼ ì œì™¸í•˜ê³  ë¡œë˜ ë²ˆí˜¸ 6ê°œë¥¼ ìƒì„±í•©ë‹ˆë‹¤." />
  <style>
    :root{
      --bg:#0b0f19;
      --card:#111827;
      --card2:#0f172a;
      --text:#f3f4f6;
      --muted:#a3a3a3;
      --accent:#22c55e;
      --accent2:#16a34a;
      --danger:#ef4444;
      --line:rgba(255,255,255,.12);
      --shadow: 0 16px 40px rgba(0,0,0,.35);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: radial-gradient(1200px 600px at 20% 0%, rgba(34,197,94,.18), transparent 60%),
                  radial-gradient(1000px 500px at 80% 20%, rgba(59,130,246,.14), transparent 55%),
                  var(--bg);
      color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", Arial, sans-serif;
    }
    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: clamp(14px, 3vw, 28px);
    }
    header{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin: 10px 0 16px;
    }
    .title{
      font-size: clamp(22px, 4.8vw, 36px);
      font-weight: 900;
      letter-spacing: -0.02em;
      line-height: 1.15;
    }
    .subtitle{
      font-size: clamp(14px, 2.6vw, 18px);
      color: var(--muted);
      line-height:1.4;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 16px;
    }
    @media (min-width: 900px){
      .grid{ grid-template-columns: 1.2fr .8fr; align-items:start; }
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .card .hd{
      padding: 16px 16px 10px;
      border-bottom:1px solid var(--line);
      background: rgba(0,0,0,.12);
    }
    .card .hd h2{
      margin:0;
      font-size: clamp(16px, 3.2vw, 20px);
      font-weight: 900;
      letter-spacing:-0.01em;
    }
    .card .hd p{
      margin:8px 0 0;
      color: var(--muted);
      font-size: clamp(13px, 2.4vw, 15px);
      line-height:1.4;
    }
    .card .bd{
      padding: 16px;
    }

    /* Main action (ê°€ì¥ í¬ê²Œ) */
    .cta{
      display:flex;
      flex-direction:column;
      gap: 12px;
    }
    .btn{
      width:100%;
      border:0;
      cursor:pointer;
      border-radius: 16px;
      font-weight: 900;
      letter-spacing:-0.01em;
      transition: transform .06s ease, filter .12s ease, opacity .12s ease;
      user-select:none;
    }
    .btn:active{ transform: scale(.995); }
    .btn:focus{
      outline: 3px solid rgba(34,197,94,.35);
      outline-offset: 2px;
    }
    .btn-main{
      padding: 18px 16px;
      font-size: clamp(22px, 5.2vw, 30px);
      background: linear-gradient(180deg, var(--accent), var(--accent2));
      color: #06230f;
      box-shadow: 0 14px 28px rgba(34,197,94,.22);
    }
    .btn-main:hover{ filter: brightness(1.03); }
    .btn-sub{
      padding: 14px 14px;
      font-size: clamp(16px, 3.6vw, 20px);
      background: rgba(255,255,255,.10);
      color: var(--text);
      border: 1px solid rgba(255,255,255,.14);
    }
    .btn-sub:hover{ filter: brightness(1.06); }

    /* ì œì™¸ í•´ì œëŠ” ë³´ì¡°: ì‘ê³  ëœ íŠ€ê²Œ */
    .btn-ghost{
      padding: 12px 14px;
      font-size: clamp(14px, 3.2vw, 18px);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.82);
      border: 1px solid rgba(255,255,255,.12);
      opacity: .9;
    }
    .btn-ghost:hover{ opacity: 1; }

    .row{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      align-items:center;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      color: rgba(255,255,255,.88);
      font-weight: 800;
      font-size: clamp(13px, 2.8vw, 15px);
    }
    .pill strong{
      font-size: clamp(15px, 3.2vw, 18px);
      color: var(--text);
    }

    /* Exclude grid: ìˆ«ì í¬ê²Œ, ëˆŒë¦¼ ì˜ ë³´ì´ê²Œ */
    .num-grid{
      display:grid;
      grid-template-columns: repeat(6, minmax(0,1fr));
      gap: 10px;
    }
    @media (max-width: 420px){
      .num-grid{ grid-template-columns: repeat(5, minmax(0,1fr)); }
    }
    .num{
      height: clamp(54px, 10.5vw, 72px);
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--text);
      font-weight: 900;
      font-size: clamp(18px, 4.6vw, 24px);
      cursor:pointer;
      transition: transform .06s ease, filter .12s ease, background .12s ease;
    }
    .num:active{ transform: scale(.99); }
    .num:hover{ filter: brightness(1.06); }
    .num.is-off{
      background: rgba(239,68,68,.14);
      border-color: rgba(239,68,68,.35);
      color: #ffd1d1;
    }
    .num.is-off::after{
      content:"ì œì™¸";
      display:block;
      font-size: clamp(10px, 2.4vw, 12px);
      font-weight: 900;
      opacity:.9;
      margin-top: 2px;
    }

    /* Results */
    .results{
      display:flex;
      flex-direction:column;
      gap: 12px;
    }
    .result{
      display:flex;
      flex-direction:column;
      gap: 10px;
      padding: 14px;
      border-radius: 16px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
    }
    .result-top{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 10px;
      flex-wrap:wrap;
    }
    .idx{
      font-weight: 900;
      font-size: clamp(16px, 3.4vw, 18px);
      color: rgba(255,255,255,.9);
    }
    .copy{
      padding: 10px 12px;
      border-radius: 12px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.12);
      color: rgba(255,255,255,.9);
      font-weight: 900;
      font-size: clamp(13px, 2.8vw, 14px);
      cursor:pointer;
    }
    .copy:hover{ filter: brightness(1.06); }

    .balls{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
    }
    .ball{
      width: clamp(54px, 12vw, 72px);
      height: clamp(54px, 12vw, 72px);
      border-radius: 999px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight: 1000;
      font-size: clamp(18px, 5vw, 26px);
      background: rgba(255,255,255,.10);
      border: 2px solid rgba(255,255,255,.14);
    }

    .note{
      margin-top: 8px;
      color: rgba(255,255,255,.75);
      font-size: clamp(13px, 2.6vw, 14px);
      line-height:1.45;
    }
    .warn{
      color: rgba(255,255,255,.92);
      background: rgba(239,68,68,.10);
      border:1px solid rgba(239,68,68,.20);
      padding: 12px 14px;
      border-radius: 16px;
      font-weight: 800;
      line-height:1.45;
      display:none;
    }
    .warn.show{ display:block; }

    /* Inputs */
    .controls{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
    }
    @media (max-width: 520px){
      .controls{ grid-template-columns: 1fr; }
    }
    label{
      display:flex;
      flex-direction:column;
      gap: 8px;
      font-weight: 900;
      font-size: clamp(14px, 3vw, 16px);
      color: rgba(255,255,255,.92);
    }
    select, input{
      padding: 14px 14px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.20);
      color: var(--text);
      font-size: clamp(16px, 3.6vw, 18px);
      font-weight: 900;
    }
    .footer{
      margin-top: 14px;
      color: rgba(255,255,255,.55);
      font-size: 12px;
      line-height:1.4;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="title">ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°</div>
      <div class="subtitle">ì›ì¹˜ ì•ŠëŠ” ë²ˆí˜¸ë¥¼ â€œì œì™¸â€í•œ ë’¤, ì•„ë˜ í° ë²„íŠ¼ìœ¼ë¡œ ë°”ë¡œ ìƒì„±í•´.</div>
    </header>

    <div class="grid">
      <!-- Left: Main actions + results -->
      <section class="card">
        <div class="hd">
          <h2>ë²ˆí˜¸ ìƒì„±</h2>
          <p>ê°€ì¥ ì¤‘ìš”í•œ ë²„íŠ¼ì€ â€œë²ˆí˜¸ ìƒì„±â€ì´ì•¼. ì‹¤ìˆ˜ ì¤„ì´ë ¤ê³  í¬ê²Œ ë§Œë“¤ì—ˆì–´.</p>
        </div>
        <div class="bd">
          <div class="cta">
            <button id="btnGen" class="btn btn-main" type="button">ğŸ² ë²ˆí˜¸ ìƒì„±</button>

            <div class="controls">
              <label>
                ì„¸íŠ¸ ê°œìˆ˜
                <select id="setCount" aria-label="ì„¸íŠ¸ ê°œìˆ˜ ì„ íƒ">
                  <option value="1">1</option>
                  <option value="3" selected>3</option>
                  <option value="5">5</option>
                  <option value="10">10</option>
                </select>
              </label>

              <label>
                ì¤‘ë³µ í—ˆìš©
                <select id="allowDup" aria-label="ì¤‘ë³µ í—ˆìš© ì—¬ë¶€">
                  <option value="no" selected>ì„¸íŠ¸ë¼ë¦¬ëŠ” ìƒê´€ì—†ìŒ</option>
                  <option value="yes">í•œ ë²ˆ ë‚˜ì˜¨ ìˆ«ì ë‹¤ì‹œ ê¸ˆì§€</option>
                </select>
              </label>
            </div>

            <div class="row" style="justify-content:space-between">
              <span class="pill">ì œì™¸ëœ ë²ˆí˜¸: <strong id="excludedCount">0</strong>ê°œ</span>
              <button id="btnClear" class="btn btn-ghost" type="button">ì œì™¸ ì „ë¶€ í•´ì œ</button>
            </div>

            <div id="warn" class="warn" role="alert"></div>

            <div class="results" id="results" aria-live="polite">
              <div class="note">
                ê²°ê³¼ëŠ” â€œíšŒì°¨â€ ê°™ì€ ë§ ì•ˆ ì“°ê³ , ê·¸ëƒ¥ <strong>1, 2, 3â€¦</strong>ìœ¼ë¡œë§Œ ë³´ì—¬ì¤„ê²Œ.
              </div>
            </div>
          </div>

          <div class="footer">
            ì°¸ê³ : ì´ê±´ ë‹¹ì²¨ë²ˆí˜¸ê°€ ì•„ë‹ˆë¼ â€œëœë¤ ìƒì„±â€ ê²°ê³¼ì•¼.
          </div>
        </div>
      </section>

      <!-- Right: Exclude panel -->
      <aside class="card">
        <div class="hd">
          <h2>ì œì™¸ ë²ˆí˜¸ ì„ íƒ</h2>
          <p>ìˆ«ìë¥¼ ëˆ„ë¥´ë©´ ì œì™¸ë¼. ë‹¤ì‹œ ëˆ„ë¥´ë©´ í•´ì œë¼.</p>
        </div>
        <div class="bd">
          <div class="num-grid" id="numGrid" aria-label="ì œì™¸í•  ë²ˆí˜¸ ì„ íƒ ì˜ì—­"></div>
          <div class="note" style="margin-top:12px;">
            ì œì™¸ë¥¼ ë„ˆë¬´ ë§ì´ í•˜ë©´ ìƒì„±ì´ ë§‰í ìˆ˜ ìˆì–´. ê·¸ë•ŒëŠ” â€œì œì™¸ ì „ë¶€ í•´ì œâ€ ëˆŒëŸ¬.
          </div>
        </div>
      </aside>
    </div>
  </div>

  <script>
    // ìƒíƒœ
    const excluded = new Set(); // ì œì™¸ëœ ë²ˆí˜¸ë“¤
    const ALL = Array.from({length:45}, (_,i)=>i+1);

    // ì—˜ë¦¬ë¨¼íŠ¸
    const numGrid = document.getElementById('numGrid');
    const excludedCount = document.getElementById('excludedCount');
    const btnClear = document.getElementById('btnClear');
    const btnGen = document.getElementById('btnGen');
    const results = document.getElementById('results');
    const warn = document.getElementById('warn');
    const setCountEl = document.getElementById('setCount');
    const allowDupEl = document.getElementById('allowDup');

    // ìˆ«ì ë²„íŠ¼ ë§Œë“¤ê¸°
    function renderGrid(){
      numGrid.innerHTML = '';
      for (let n=1; n<=45; n++){
        const b = document.createElement('button');
        b.type = 'button';
        b.className = 'num' + (excluded.has(n) ? ' is-off' : '');
        b.textContent = String(n);
        b.setAttribute('aria-pressed', excluded.has(n) ? 'true' : 'false');
        b.addEventListener('click', ()=>{
          if (excluded.has(n)) excluded.delete(n);
          else excluded.add(n);
          updateExcludedUI();
          renderGrid();
          clearWarn();
        });
        numGrid.appendChild(b);
      }
    }

    function updateExcludedUI(){
      excludedCount.textContent = String(excluded.size);
    }

    function clearWarn(){
      warn.classList.remove('show');
      warn.textContent = '';
    }

    function showWarn(msg){
      warn.textContent = msg;
      warn.classList.add('show');
    }

    function availablePool(){
      return ALL.filter(n => !excluded.has(n));
    }

    function sample6(pool){
      // poolì—ì„œ 6ê°œ ë½‘ê¸° (ì¤‘ë³µ ì—†ì´)
      const arr = pool.slice();
      // Fisher-Yates shuffle (ë¶€ë¶„ë§Œ)
      for (let i = arr.length - 1; i > 0; i--){
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      const pick = arr.slice(0, 6).sort((a,b)=>a-b);
      return pick;
    }

    function makeResultCard(index, nums){
      const wrap = document.createElement('div');
      wrap.className = 'result';

      const top = document.createElement('div');
      top.className = 'result-top';

      const idx = document.createElement('div');
      idx.className = 'idx';
      idx.textContent = String(index);

      const copy = document.createElement('button');
      copy.type = 'button';
      copy.className = 'copy';
      copy.textContent = 'ë³µì‚¬';
      copy.addEventListener('click', async ()=>{
        const text = nums.join(', ');
        try{
          await navigator.clipboard.writeText(text);
          copy.textContent = 'ë³µì‚¬ë¨';
          setTimeout(()=> copy.textContent='ë³µì‚¬', 900);
        }catch(e){
          copy.textContent = 'ë³µì‚¬ ì‹¤íŒ¨';
          setTimeout(()=> copy.textContent='ë³µì‚¬', 900);
        }
      });

      top.appendChild(idx);
      top.appendChild(copy);

      const balls = document.createElement('div');
      balls.className = 'balls';
      nums.forEach(n=>{
        const ball = document.createElement('div');
        ball.className = 'ball';
        ball.textContent = String(n);
        balls.appendChild(ball);
      });

      wrap.appendChild(top);
      wrap.appendChild(balls);
      return wrap;
    }

    function generate(){
      clearWarn();

      const count = parseInt(setCountEl.value, 10);
      const allowDup = (allowDupEl.value === 'yes');

      let pool = availablePool();
      if (pool.length < 6){
        showWarn('ì œì™¸í•œ ë²ˆí˜¸ê°€ ë„ˆë¬´ ë§ì•„. ìµœì†Œ 6ê°œëŠ” ë‚¨ê²¨ì•¼ ìƒì„±ë¼.');
        return;
      }

      results.innerHTML = '';
      const out = [];

      // allowDup = "í•œ ë²ˆ ë‚˜ì˜¨ ìˆ«ì ë‹¤ì‹œ ê¸ˆì§€" ì˜µì…˜ì´ë©´, ì„¸íŠ¸ê°€ ëŠ˜ìˆ˜ë¡ í’€ì„ ê¹ì•„ì•¼ í•¨
      let workingPool = pool.slice();

      for (let i=1; i<=count; i++){
        if (workingPool.length < 6){
          showWarn('â€œí•œ ë²ˆ ë‚˜ì˜¨ ìˆ«ì ë‹¤ì‹œ ê¸ˆì§€â€ë¡œ ì„¤ì •í–ˆëŠ”ë° ìˆ«ìê°€ ë¶€ì¡±í•´ì¡Œì–´. ì œì™¸ë¥¼ ì¤„ì´ê±°ë‚˜ ì˜µì…˜ì„ ë°”ê¿”.');
          break;
        }
        const nums = sample6(workingPool);
        out.push(nums);

        if (allowDup){
          // ë‚˜ì˜¨ ìˆ«ìë“¤ì€ ë‹¤ìŒ ì„¸íŠ¸ì—ì„œ ëª» ì“°ê²Œ ì œê±°
          const used = new Set(nums);
          workingPool = workingPool.filter(n => !used.has(n));
        }

        results.appendChild(makeResultCard(i, nums));
      }

      if (out.length === 0){
        results.innerHTML = '<div class="note">ì•„ì§ ìƒì„±ëœ ê²°ê³¼ê°€ ì—†ì–´.</div>';
      }
    }

    // ì´ë²¤íŠ¸
    btnClear.addEventListener('click', ()=>{
      excluded.clear();
      updateExcludedUI();
      renderGrid();
      clearWarn();
    });

    btnGen.addEventListener('click', generate);

    // ì´ˆê¸° ë Œë”
    renderGrid();
    updateExcludedUI();
  </script>
</body>
</html>
