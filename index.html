<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°</title>
  <meta name="description" content="ì œì™¸í•  ë²ˆí˜¸ë¥¼ ì„ íƒí•œ ë’¤ ë¡œë˜ ë²ˆí˜¸ 6ê°œë¥¼ ìƒì„±í•©ë‹ˆë‹¤." />

  <style>
    :root{
      --bg:#071018;
      --card:rgba(255,255,255,.06);
      --card2:rgba(0,0,0,.18);
      --line:rgba(255,255,255,.14);
      --text:#f3f4f6;
      --muted:rgba(255,255,255,.7);
      --accent:#22c55e;
      --accent2:#16a34a;
      --danger:#ef4444;
      --shadow: 0 18px 40px rgba(0,0,0,.35);
      --radius: 18px;

      /* ê¸€ì”¨ í¬ê²Œ */
      --h1: clamp(24px, 5.4vw, 40px);
      --h2: clamp(18px, 4.2vw, 24px);
      --p:  clamp(15px, 3.6vw, 18px);
      --btn: clamp(20px, 5.0vw, 30px);
      --num: clamp(18px, 4.6vw, 24px);
      --resultNum: clamp(20px, 5.2vw, 28px);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", Arial, sans-serif;
      background:
        radial-gradient(1200px 700px at 15% 0%, rgba(34,197,94,.18), transparent 55%),
        radial-gradient(900px 500px at 90% 10%, rgba(59,130,246,.12), transparent 50%),
        var(--bg);
    }

    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: clamp(14px, 3vw, 28px);
      padding-bottom: 120px; /* í•˜ë‹¨ ë²„íŠ¼/ê²°ê³¼ ì—¬ë°± */
    }

    header{
      display:flex;
      flex-direction:column;
      gap: 8px;
      margin: 8px 0 16px;
    }
    .title{
      font-size: var(--h1);
      font-weight: 950;
      letter-spacing: -0.02em;
      line-height: 1.12;
    }
    .subtitle{
      font-size: var(--p);
      color: var(--muted);
      line-height: 1.45;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 16px;
    }
    @media (min-width: 920px){
      .grid{ grid-template-columns: 1.1fr .9fr; align-items:start; }
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .hd{
      padding: 16px 16px 12px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.10);
    }
    .hd h2{
      margin:0;
      font-size: var(--h2);
      font-weight: 950;
      letter-spacing:-0.01em;
    }
    .hd p{
      margin: 8px 0 0;
      font-size: var(--p);
      color: var(--muted);
      line-height:1.5;
    }
    .bd{ padding: 16px; }

    /* ë²„íŠ¼: í¼ì§ */
    .btn{
      width:100%;
      border:0;
      cursor:pointer;
      border-radius: 18px;
      font-weight: 950;
      letter-spacing:-0.01em;
      user-select:none;
      transition: transform .06s ease, filter .12s ease, opacity .12s ease;
    }
    .btn:active{ transform: scale(.995); }
    .btn:focus{ outline: 3px solid rgba(34,197,94,.35); outline-offset: 2px; }

    .btn-main{
      padding: 18px 16px;
      font-size: var(--btn);
      background: linear-gradient(180deg, var(--accent), var(--accent2));
      color: #06230f;
      box-shadow: 0 14px 28px rgba(34,197,94,.22);
    }
    .btn-main:hover{ filter: brightness(1.04); }

    .btn-ghost{
      padding: 14px 14px;
      font-size: clamp(16px, 3.8vw, 20px);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.9);
      border: 1px solid rgba(255,255,255,.14);
      opacity: .95;
    }
    .btn-ghost:hover{ opacity: 1; filter: brightness(1.06); }

    .row{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      margin-top: 12px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 12px 14px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      font-size: clamp(15px, 3.6vw, 18px);
      font-weight: 900;
      color: rgba(255,255,255,.9);
    }
    .pill strong{ font-size: clamp(18px, 4.2vw, 22px); }

    /* ì œì™¸ ìˆ«ì ê·¸ë¦¬ë“œ: í¬ê²Œ */
    .num-grid{
      display:grid;
      grid-template-columns: repeat(6, minmax(0,1fr));
      gap: 10px;
    }
    @media (max-width: 420px){
      .num-grid{ grid-template-columns: repeat(5, minmax(0,1fr)); }
    }
    .num{
      height: clamp(58px, 11vw, 78px);
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--text);
      font-weight: 950;
      font-size: var(--num);
      cursor:pointer;
      transition: transform .06s ease, filter .12s ease, background .12s ease;
      line-height: 1;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
    }
    .num:active{ transform: scale(.99); }
    .num:hover{ filter: brightness(1.06); }
    .num.is-off{
      background: rgba(239,68,68,.14);
      border-color: rgba(239,68,68,.35);
      color: #ffd1d1;
    }
    .num.is-off::after{
      content:"ì œì™¸";
      position:absolute;
      bottom: 8px;
      font-size: clamp(11px, 2.4vw, 12px);
      font-weight: 950;
      opacity:.95;
    }

    /* ê²½ê³  */
    .warn{
      margin-top: 12px;
      padding: 14px;
      border-radius: 16px;
      background: rgba(239,68,68,.12);
      border: 1px solid rgba(239,68,68,.24);
      color: rgba(255,255,255,.95);
      font-size: var(--p);
      font-weight: 850;
      line-height: 1.5;
      display:none;
    }
    .warn.show{ display:block; }

    /* ê²°ê³¼: í•œ ì¤„ë¡œ ê¸¸ê²Œ, ì¤„ë°”ê¿ˆ ê¸ˆì§€ */
    .results{
      display:flex;
      flex-direction:column;
      gap: 12px;
      margin-top: 14px;
    }
    .result{
      padding: 14px;
      border-radius: 18px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      overflow:hidden;
    }
    .result-top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      margin-bottom: 10px;
    }
    .idx{
      font-size: clamp(16px, 3.8vw, 18px);
      font-weight: 950;
      color: rgba(255,255,255,.92);
    }
    .copy{
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.14);
      color: rgba(255,255,255,.92);
      font-weight: 950;
      font-size: clamp(14px, 3.2vw, 15px);
      cursor:pointer;
    }
    .copy:hover{ filter: brightness(1.07); }

    .line{
      display:block;
      white-space: nowrap;     /* ì¤„ë°”ê¿ˆ ê¸ˆì§€ */
      overflow-x: auto;        /* ê¸¸ë©´ ê°€ë¡œ ìŠ¤í¬ë¡¤ */
      -webkit-overflow-scrolling: touch;
      padding-bottom: 6px;
      font-size: var(--resultNum);
      font-weight: 950;
      letter-spacing: 0.01em;
    }
    .line::-webkit-scrollbar{ height: 8px; }
    .line::-webkit-scrollbar-thumb{ background: rgba(255,255,255,.18); border-radius: 999px; }
    .line::-webkit-scrollbar-track{ background: rgba(255,255,255,.06); border-radius: 999px; }

    /* ë½‘ê¸° ì• ë‹ˆë©”ì´ì…˜ ëŠë‚Œ: ë¡¤ë§ í…ìŠ¤íŠ¸ */
    .rolling{
      opacity:.95;
      filter: blur(.0px);
    }
    .rolling .digit{
      display:inline-block;
      min-width: 2.2ch;
      text-align:center;
      padding: 10px 12px;
      margin-right: 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.12);
      animation: pop .25s ease both;
    }
    @keyframes pop{
      from{ transform: translateY(2px); opacity:.75; }
      to{ transform: translateY(0); opacity:1; }
    }

    .note{
      margin-top: 10px;
      font-size: var(--p);
      color: rgba(255,255,255,.72);
      line-height: 1.5;
    }

    /* ëª¨ë°”ì¼ì—ì„œ ë©”ì¸ ë²„íŠ¼ ê³ ì • (ì›í•˜ë©´ ìœ ì§€í•˜ì„¸ìš”) */
    .stickyBar{
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      padding: 12px;
      background: linear-gradient(180deg, rgba(7,16,24,0), rgba(7,16,24,.92) 28%, rgba(7,16,24,.98));
      backdrop-filter: blur(6px);
      border-top: 1px solid rgba(255,255,255,.10);
      z-index: 50;
    }
    .stickyInner{
      max-width: 980px;
      margin: 0 auto;
      padding: 0 clamp(14px, 3vw, 28px);
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="title">ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°</div>
      <div class="subtitle">ì œì™¸í•  ë²ˆí˜¸ë¥¼ ì„ íƒí•œ ë’¤, ì•„ë˜ í° ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë°”ë¡œ ìƒì„±ë©ë‹ˆë‹¤.</div>
    </header>

    <div class="grid">
      <!-- ì™¼ìª½: ê²°ê³¼ -->
      <section class="card">
        <div class="hd">
          <h2>ìƒì„± ê²°ê³¼</h2>
          <p>ê²°ê³¼ëŠ” í•œ ì¤„ë¡œ ê¸¸ê²Œ í‘œì‹œë©ë‹ˆë‹¤. (ê¸¸ë©´ ì¢Œìš°ë¡œ ìŠ¤í¬ë¡¤ë©ë‹ˆë‹¤.)</p>
        </div>
        <div class="bd">
          <div class="row">
            <span class="pill">ì œì™¸ëœ ë²ˆí˜¸ <strong id="excludedCount">0</strong>ê°œ</span>
            <button id="btnClear" class="btn btn-ghost" type="button">ì œì™¸ ì „ë¶€ í•´ì œ</button>
          </div>

          <div id="warn" class="warn" role="alert"></div>

          <div class="results" id="results" aria-live="polite">
            <div class="note">ì•ˆë‚´: ë³¸ ë„êµ¬ëŠ” ë¬´ì‘ìœ„ ìƒì„±ê¸°ì´ë©° ë‹¹ì²¨ì„ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>
          </div>
        </div>
      </section>

      <!-- ì˜¤ë¥¸ìª½: ì œì™¸ -->
      <aside class="card">
        <div class="hd">
          <h2>ì œì™¸ ë²ˆí˜¸ ì„ íƒ</h2>
          <p>ìˆ«ìë¥¼ ëˆ„ë¥´ë©´ ì œì™¸ë©ë‹ˆë‹¤. ë‹¤ì‹œ ëˆ„ë¥´ë©´ í•´ì œë©ë‹ˆë‹¤.</p>
        </div>
        <div class="bd">
          <div class="num-grid" id="numGrid" aria-label="ì œì™¸í•  ë²ˆí˜¸ ì„ íƒ"></div>
          <div class="note">ì£¼ì˜: ì œì™¸ê°€ ë„ˆë¬´ ë§ìœ¼ë©´(ë‚¨ì€ ìˆ«ì 6ê°œ ë¯¸ë§Œ) ìƒì„±ì´ ë¶ˆê°€í•©ë‹ˆë‹¤.</div>
        </div>
      </aside>
    </div>
  </div>

  <!-- í•˜ë‹¨ ê³ ì • ìƒì„± ë²„íŠ¼ -->
  <div class="stickyBar">
    <div class="stickyInner">
      <button id="btnGen" class="btn btn-main" type="button">ğŸ² ë²ˆí˜¸ ìƒì„±</button>
    </div>
  </div>

  <script>
    const excluded = new Set();
    const ALL = Array.from({length:45}, (_,i)=>i+1);

    const numGrid = document.getElementById('numGrid');
    const excludedCount = document.getElementById('excludedCount');
    const btnClear = document.getElementById('btnClear');
    const btnGen = document.getElementById('btnGen');
    const results = document.getElementById('results');
    const warn = document.getElementById('warn');

    function updateExcludedUI(){
      excludedCount.textContent = String(excluded.size);
    }

    function clearWarn(){
      warn.classList.remove('show');
      warn.textContent = '';
    }
    function showWarn(msg){
      warn.textContent = msg;
      warn.classList.add('show');
    }

    function renderGrid(){
      numGrid.innerHTML = '';
      for (let n=1; n<=45; n++){
        const b = document.createElement('button');
        b.type = 'button';
        b.className = 'num' + (excluded.has(n) ? ' is-off' : '');
        b.textContent = String(n);
        b.setAttribute('aria-pressed', excluded.has(n) ? 'true' : 'false');
        b.addEventListener('click', ()=>{
          if (excluded.has(n)) excluded.delete(n);
          else excluded.add(n);
          updateExcludedUI();
          renderGrid();
          clearWarn();
        });
        numGrid.appendChild(b);
      }
    }

    function availablePool(){
      return ALL.filter(n => !excluded.has(n));
    }

    function pick6(pool){
      const arr = pool.slice();
      for (let i = arr.length - 1; i > 0; i--){
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr.slice(0, 6).sort((a,b)=>a-b);
    }

    function makeResultCard(index, nums){
      const wrap = document.createElement('div');
      wrap.className = 'result';

      const top = document.createElement('div');
      top.className = 'result-top';

      const idx = document.createElement('div');
      idx.className = 'idx';
      idx.textContent = String(index);

      const copy = document.createElement('button');
      copy.type = 'button';
      copy.className = 'copy';
      copy.textContent = 'ë³µì‚¬';
      copy.addEventListener('click', async ()=>{
        const text = nums.join(' ');
        try{
          await navigator.clipboard.writeText(text);
          copy.textContent = 'ë³µì‚¬ë¨';
          setTimeout(()=> copy.textContent='ë³µì‚¬', 900);
        }catch(e){
          copy.textContent = 'ë³µì‚¬ ì‹¤íŒ¨';
          setTimeout(()=> copy.textContent='ë³µì‚¬', 900);
        }
      });

      top.appendChild(idx);
      top.appendChild(copy);

      const line = document.createElement('div');
      line.className = 'line';
      line.textContent = nums.join('   '); // í•œ ì¤„ë¡œ ê¸¸ê²Œ

      wrap.appendChild(top);
      wrap.appendChild(line);

      return wrap;
    }

    // â€œë½‘ëŠ” ë“¯í•œâ€ ë¡¤ë§ ì• ë‹ˆë©”ì´ì…˜: ìˆ«ìê°€ ì ê¹ ë¹ ë¥´ê²Œ ë°”ë€Œë‹¤ê°€ í™•ì •
    function makeRollingCard(index){
      const wrap = document.createElement('div');
      wrap.className = 'result';

      const top = document.createElement('div');
      top.className = 'result-top';

      const idx = document.createElement('div');
      idx.className = 'idx';
      idx.textContent = String(index);

      const copy = document.createElement('button');
      copy.type = 'button';
      copy.className = 'copy';
      copy.textContent = 'ë³µì‚¬';
      copy.disabled = true;
      copy.style.opacity = '.6';
      copy.style.cursor = 'not-allowed';

      top.appendChild(idx);
      top.appendChild(copy);

      const line = document.createElement('div');
      line.className = 'line rolling';
      // ì´ˆê¸° 6ê°œ ìŠ¬ë¡¯
      line.innerHTML = `
        <span class="digit">--</span>
        <span class="digit">--</span>
        <span class="digit">--</span>
        <span class="digit">--</span>
        <span class="digit">--</span>
        <span class="digit">--</span>
      `;

      wrap.appendChild(top);
      wrap.appendChild(line);

      return {wrap, line, copy};
    }

    async function generate(){
      clearWarn();

      const pool = availablePool();
      if (pool.length < 6){
        showWarn('ì œì™¸í•œ ë²ˆí˜¸ê°€ ë„ˆë¬´ ë§ìŠµë‹ˆë‹¤. ìµœì†Œ 6ê°œëŠ” ë‚¨ê²¨ì•¼ ìƒì„±ë©ë‹ˆë‹¤.');
        return;
      }

      // ê²°ê³¼ ì˜ì—­ ë¹„ìš°ê¸°
      results.innerHTML = '';

      // â€œí•œ ë²ˆ ìƒì„± = 1ì„¸íŠ¸â€ë¡œ ë‹¨ìˆœí™”
      const {wrap, line, copy} = makeRollingCard(1);
      results.appendChild(wrap);

      // ë¡¤ë§: 900ms ë™ì•ˆ 60ms ê°„ê²©ìœ¼ë¡œ ìˆ«ì ë³€ê²½
      const digits = Array.from(line.querySelectorAll('.digit'));
      const start = performance.now();
      const duration = 900;
      const interval = 60;

      const timer = setInterval(()=>{
        for (let i=0; i<digits.length; i++){
          const temp = Math.floor(Math.random()*45) + 1;
          digits[i].textContent = String(temp);
        }
        if (performance.now() - start >= duration){
          clearInterval(timer);

          // ìµœì¢… í™•ì •
          const finalNums = pick6(pool);
          line.classList.remove('rolling');
          line.textContent = finalNums.join('   ');

          // ë³µì‚¬ í™œì„±í™”
          copy.disabled = false;
          copy.style.opacity = '1';
          copy.style.cursor = 'pointer';

          copy.addEventListener('click', async ()=>{
            const text = finalNums.join(' ');
            try{
              await navigator.clipboard.writeText(text);
              copy.textContent = 'ë³µì‚¬ë¨';
              setTimeout(()=> copy.textContent='ë³µì‚¬', 900);
            }catch(e){
              copy.textContent = 'ë³µì‚¬ ì‹¤íŒ¨';
              setTimeout(()=> copy.textContent='ë³µì‚¬', 900);
            }
          }, {once:true});
        }
      }, interval);
    }

    btnClear.addEventListener('click', ()=>{
      excluded.clear();
      updateExcludedUI();
      renderGrid();
      clearWarn();
    });

    btnGen.addEventListener('click', generate);

    renderGrid();
    updateExcludedUI();
  </script>
</body>
</html>
